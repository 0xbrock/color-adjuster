<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NQS7PJS47D"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NQS7PJS47D');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>Color Tool - Lighten/Darken & Contrast Checker | WCAG Accessibility Tool</title>
  <meta name="title" content="Color Tool - Lighten/Darken & Contrast Checker | WCAG Accessibility">
  <meta name="description" content="Online color tool: lighten/darken colors and check WCAG contrast ratios. Test AA/AAA accessibility compliance with live text previews. Supports hex and rgba formats.">
  <meta name="keywords" content="color contrast checker, WCAG contrast ratio, color accessibility, color lighten, color darken, hex color adjuster, AA AAA compliance, accessibility tool, color shade generator">
  <meta name="author" content="Color Adjuster">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://github.com/color-adjuster">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Color Tool - Lighten/Darken & WCAG Contrast Checker">
  <meta property="og:description" content="Color tool: adjust lightness/darkness and check WCAG contrast ratios. Test AA/AAA accessibility compliance with live text previews.">
  <meta property="og:image" content="https://via.placeholder.com/1200x630/3498db/ffffff?text=Color+Tool">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="Color Tool - Lighten/Darken & WCAG Contrast Checker">
  <meta property="twitter:description" content="Color tool: adjust colors and check WCAG contrast ratios. Test AA/AAA accessibility with live previews.">

  <!-- Structured Data for Rich Results -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Color Tool - Lighten/Darken & Contrast Checker",
    "description": "Online tool to lighten/darken colors and check WCAG contrast ratios for accessibility compliance.",
    "applicationCategory": "DesignApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "featureList": [
      "Lighten colors by percentage",
      "Darken colors by percentage",
      "WCAG contrast ratio checker",
      "AA and AAA compliance testing",
      "Live text accessibility preview",
      "Hex color input and output",
      "RGBA color input and output",
      "Visual color picker",
      "One-click copy to clipboard"
    ]
  }
  </script>

  <!-- Theme Color for Mobile Browsers -->
  <meta name="theme-color" content="#1a1a2e">

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Color Adjust">
  <link rel="apple-touch-icon" href="icons/icon-192.svg">

  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 600px;
      margin: 0 auto;
      padding: 2rem;
      background: #1a1a2e;
      color: #eee;
      min-height: 100vh;
    }
    h1 { text-align: center; margin-bottom: 2rem; }
    .input-group {
      margin-bottom: 1.5rem;
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #333;
      border-radius: 8px;
      background: #16213e;
      color: #eee;
      font-size: 1rem;
    }
    input:focus {
      outline: none;
      border-color: #0f4c75;
    }
    .color-input-wrapper {
      display: flex;
      gap: 0.5rem;
    }
    .color-input-wrapper input[type="text"] {
      flex: 1;
    }
    input[type="color"] {
      width: 50px;
      height: 46px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .buttons {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    button {
      flex: 1;
      padding: 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.1s, opacity 0.1s;
    }
    button:hover { opacity: 0.9; }
    button:active { transform: scale(0.98); }
    .btn-lighten { background: #f0f0f0; color: #333; }
    .btn-darken { background: #333; color: #f0f0f0; }
    .results {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    .result-card {
      background: #16213e;
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
    }
    .result-card h3 {
      margin: 0 0 0.75rem 0;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #888;
    }
    .color-preview {
      height: 80px;
      border-radius: 8px;
      margin-bottom: 0.75rem;
      border: 1px solid #333;
    }
    .color-value {
      font-family: 'Monaco', 'Consolas', monospace;
      font-size: 0.875rem;
      padding: 0.5rem;
      background: #0f0f23;
      border-radius: 4px;
      cursor: pointer;
      margin-bottom: 0.25rem;
    }
    .color-value:hover { background: #1a1a3e; }
    .copied {
      font-size: 0.75rem;
      color: #4ade80;
      height: 1.25rem;
    }
    .help {
      margin-top: 2rem;
      padding: 1rem;
      background: #16213e;
      border-radius: 8px;
      font-size: 0.875rem;
      color: #888;
    }
    .help code {
      background: #0f0f23;
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      color: #aaa;
    }

    /* Contrast Checker Styles */
    .section-divider {
      margin: 3rem 0;
      border: none;
      border-top: 1px solid #333;
    }
    .contrast-checker {
      margin-top: 2rem;
    }
    .contrast-checker h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }
    .color-inputs-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    .color-input-group label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .color-swatch {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      border: 1px solid #444;
    }
    .contrast-preview {
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 1.5rem;
      transition: all 0.2s ease;
    }
    .preview-large {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
    }
    .preview-normal {
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }
    .preview-small {
      font-size: 0.875rem;
      opacity: 0.9;
    }
    .contrast-ratio-display {
      background: #16213e;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .ratio-value {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    .ratio-label {
      font-size: 0.875rem;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    .wcag-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    .wcag-card {
      background: #16213e;
      border-radius: 12px;
      padding: 1rem;
    }
    .wcag-card h4 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #888;
      margin: 0 0 0.75rem 0;
    }
    .wcag-level {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px solid #0f0f23;
    }
    .wcag-level:last-child {
      border-bottom: none;
    }
    .wcag-level-name {
      font-weight: 500;
    }
    .wcag-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    .badge-pass {
      background: #065f46;
      color: #34d399;
    }
    .badge-fail {
      background: #7f1d1d;
      color: #fca5a5;
    }
    .swap-btn {
      background: #0f4c75;
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 0 auto 1.5rem;
      transition: background 0.2s;
    }
    .swap-btn:hover {
      background: #1a6ca8;
    }
    .example-texts {
      background: #16213e;
      border-radius: 12px;
      padding: 1.5rem;
    }
    .example-texts h4 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #888;
      margin: 0 0 1rem 0;
    }
    .example-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }
    .example-row:last-child {
      margin-bottom: 0;
    }
    .example-info {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }
    .example-size {
      font-size: 0.75rem;
      opacity: 0.7;
    }
    @media (max-width: 480px) {
      .color-inputs-row {
        grid-template-columns: 1fr;
      }
      .wcag-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <h1>Color Lighten/Darken</h1>

  <div class="input-group">
    <label for="colorInput">Color (hex or rgba)</label>
    <div class="color-input-wrapper">
      <input type="text" id="colorInput" placeholder="#3498db or rgba(52, 152, 219, 1)" value="#3498db">
      <input type="color" id="colorPicker" value="#3498db">
    </div>
  </div>

  <div class="input-group">
    <label for="percentage">Percentage (%)</label>
    <input type="number" id="percentage" value="20" min="0" max="100">
  </div>

  <div class="buttons">
    <button class="btn-lighten" onclick="adjustColor('lighten')">Lighten</button>
    <button class="btn-darken" onclick="adjustColor('darken')">Darken</button>
  </div>

  <div class="results">
    <div class="result-card">
      <h3>Original</h3>
      <div class="color-preview" id="originalPreview"></div>
      <div class="color-value" id="originalHex" onclick="copyToClipboard(this)"></div>
      <div class="color-value" id="originalRgba" onclick="copyToClipboard(this)"></div>
      <div class="copied" id="originalCopied"></div>
    </div>
    <div class="result-card">
      <h3>Result</h3>
      <div class="color-preview" id="resultPreview"></div>
      <div class="color-value" id="resultHex" onclick="copyToClipboard(this)"></div>
      <div class="color-value" id="resultRgba" onclick="copyToClipboard(this)"></div>
      <div class="copied" id="resultCopied"></div>
    </div>
  </div>

  <div class="help">
    <strong>Supported formats:</strong><br>
    <code>#rgb</code> <code>#rrggbb</code> <code>rgb(r, g, b)</code> <code>rgba(r, g, b, a)</code>
  </div>

  <hr class="section-divider">

  <!-- Contrast Checker Section -->
  <section class="contrast-checker">
    <h2>Contrast Checker</h2>

    <div class="color-inputs-row">
      <div class="color-input-group">
        <label>
          <span class="color-swatch" id="fgSwatch"></span>
          Text Color
        </label>
        <div class="color-input-wrapper">
          <input type="text" id="fgColorInput" placeholder="#000000" value="#1a1a2e">
          <input type="color" id="fgColorPicker" value="#1a1a2e">
        </div>
      </div>
      <div class="color-input-group">
        <label>
          <span class="color-swatch" id="bgSwatch"></span>
          Background Color
        </label>
        <div class="color-input-wrapper">
          <input type="text" id="bgColorInput" placeholder="#ffffff" value="#f0f0f0">
          <input type="color" id="bgColorPicker" value="#f0f0f0">
        </div>
      </div>
    </div>

    <button class="swap-btn" onclick="swapContrastColors()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M7 16V4M7 4L3 8M7 4L11 8M17 8V20M17 20L21 16M17 20L13 16"/>
      </svg>
      Swap Colors
    </button>

    <div class="contrast-preview" id="contrastPreview">
      <div class="preview-large">Large Text (24px Bold)</div>
      <div class="preview-normal">Normal body text at 16px demonstrates typical reading conditions for most web content.</div>
      <div class="preview-small">Small text at 14px is common for captions and secondary information.</div>
    </div>

    <div class="contrast-ratio-display">
      <div class="ratio-value" id="contrastRatio">4.5:1</div>
      <div class="ratio-label">Contrast Ratio</div>
    </div>

    <div class="wcag-grid">
      <div class="wcag-card">
        <h4>Normal Text</h4>
        <div class="wcag-level">
          <span class="wcag-level-name">AA (4.5:1)</span>
          <span class="wcag-badge" id="normalAA">Pass</span>
        </div>
        <div class="wcag-level">
          <span class="wcag-level-name">AAA (7:1)</span>
          <span class="wcag-badge" id="normalAAA">Fail</span>
        </div>
      </div>
      <div class="wcag-card">
        <h4>Large Text</h4>
        <div class="wcag-level">
          <span class="wcag-level-name">AA (3:1)</span>
          <span class="wcag-badge" id="largeAA">Pass</span>
        </div>
        <div class="wcag-level">
          <span class="wcag-level-name">AAA (4.5:1)</span>
          <span class="wcag-badge" id="largeAAA">Pass</span>
        </div>
      </div>
    </div>

    <div class="example-texts">
      <h4>Text Examples</h4>
      <div class="example-row" id="example24">
        <span style="font-size: 24px; font-weight: 700;">Heading Text</span>
        <div class="example-info">
          <span class="wcag-badge" id="badge24">Pass</span>
          <span class="example-size">24px Bold (Large)</span>
        </div>
      </div>
      <div class="example-row" id="example18">
        <span style="font-size: 18px; font-weight: 700;">Subheading</span>
        <div class="example-info">
          <span class="wcag-badge" id="badge18">Pass</span>
          <span class="example-size">18px Bold (Large)</span>
        </div>
      </div>
      <div class="example-row" id="example16">
        <span style="font-size: 16px;">Body text sample</span>
        <div class="example-info">
          <span class="wcag-badge" id="badge16">Pass</span>
          <span class="example-size">16px Normal</span>
        </div>
      </div>
      <div class="example-row" id="example14">
        <span style="font-size: 14px;">Small caption text</span>
        <div class="example-info">
          <span class="wcag-badge" id="badge14">Pass</span>
          <span class="example-size">14px Normal</span>
        </div>
      </div>
      <div class="example-row" id="example12">
        <span style="font-size: 12px;">Fine print text</span>
        <div class="example-info">
          <span class="wcag-badge" id="badge12">Pass</span>
          <span class="example-size">12px Normal</span>
        </div>
      </div>
    </div>
  </section>

  <script>
    function parseColor(input) {
      input = input.trim().toLowerCase();
      let r, g, b, a = 1;

      // Hex format
      if (input.startsWith('#')) {
        let hex = input.slice(1);
        if (hex.length === 3) {
          hex = hex.split('').map(c => c + c).join('');
        }
        if (hex.length === 6 || hex.length === 8) {
          r = parseInt(hex.slice(0, 2), 16);
          g = parseInt(hex.slice(2, 4), 16);
          b = parseInt(hex.slice(4, 6), 16);
          if (hex.length === 8) {
            a = parseInt(hex.slice(6, 8), 16) / 255;
          }
        }
      }
      // RGB/RGBA format
      else if (input.startsWith('rgb')) {
        const match = input.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+))?\s*\)/);
        if (match) {
          r = parseInt(match[1]);
          g = parseInt(match[2]);
          b = parseInt(match[3]);
          a = match[4] !== undefined ? parseFloat(match[4]) : 1;
        }
      }

      if (r === undefined || isNaN(r) || isNaN(g) || isNaN(b)) {
        return null;
      }
      return { r, g, b, a };
    }

    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
          case g: h = ((b - r) / d + 2) / 6; break;
          case b: h = ((r - g) / d + 4) / 6; break;
        }
      }
      return { h: h * 360, s: s * 100, l: l * 100 };
    }

    function hslToRgb(h, s, l) {
      h /= 360; s /= 100; l /= 100;
      let r, g, b;

      if (s === 0) {
        r = g = b = l;
      } else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }
      return {
        r: Math.round(r * 255),
        g: Math.round(g * 255),
        b: Math.round(b * 255)
      };
    }

    function toHex(color) {
      const hex = c => c.toString(16).padStart(2, '0');
      return `#${hex(color.r)}${hex(color.g)}${hex(color.b)}`;
    }

    function toRgba(color) {
      if (color.a !== 1) {
        return `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`;
      }
      return `rgb(${color.r}, ${color.g}, ${color.b})`;
    }

    function adjustColor(mode) {
      const input = document.getElementById('colorInput').value;
      const percent = parseFloat(document.getElementById('percentage').value);
      const color = parseColor(input);

      if (!color) {
        alert('Invalid color format. Use #hex or rgba().');
        return;
      }

      // Convert to HSL
      const hsl = rgbToHsl(color.r, color.g, color.b);

      // Adjust lightness (SCSS style)
      if (mode === 'lighten') {
        hsl.l = Math.min(100, hsl.l + percent);
      } else {
        hsl.l = Math.max(0, hsl.l - percent);
      }

      // Convert back to RGB
      const result = hslToRgb(hsl.h, hsl.s, hsl.l);
      result.a = color.a;

      // Update display
      document.getElementById('originalPreview').style.background = toRgba(color);
      document.getElementById('originalHex').textContent = toHex(color);
      document.getElementById('originalRgba').textContent = toRgba(color);

      document.getElementById('resultPreview').style.background = toRgba(result);
      document.getElementById('resultHex').textContent = toHex(result);
      document.getElementById('resultRgba').textContent = toRgba(result);
    }

    function copyToClipboard(element) {
      navigator.clipboard.writeText(element.textContent);
      const card = element.closest('.result-card');
      const copiedEl = card.querySelector('.copied');
      copiedEl.textContent = 'Copied!';
      setTimeout(() => copiedEl.textContent = '', 1500);
    }

    // Sync color picker with text input
    document.getElementById('colorPicker').addEventListener('input', (e) => {
      document.getElementById('colorInput').value = e.target.value;
    });

    document.getElementById('colorInput').addEventListener('input', (e) => {
      const color = parseColor(e.target.value);
      if (color) {
        document.getElementById('colorPicker').value = toHex(color);
      }
    });

    // Initialize
    adjustColor('lighten');

    // ==========================================
    // Contrast Checker Functions
    // ==========================================

    // Calculate relative luminance per WCAG 2.1
    function getLuminance(r, g, b) {
      const [rs, gs, bs] = [r, g, b].map(c => {
        c = c / 255;
        return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
      });
      return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
    }

    // Calculate contrast ratio between two colors
    function getContrastRatio(color1, color2) {
      const l1 = getLuminance(color1.r, color1.g, color1.b);
      const l2 = getLuminance(color2.r, color2.g, color2.b);
      const lighter = Math.max(l1, l2);
      const darker = Math.min(l1, l2);
      return (lighter + 0.05) / (darker + 0.05);
    }

    // Check WCAG compliance levels
    function checkWCAG(ratio) {
      return {
        normalAA: ratio >= 4.5,
        normalAAA: ratio >= 7,
        largeAA: ratio >= 3,
        largeAAA: ratio >= 4.5
      };
    }

    // Update badge appearance
    function updateBadge(element, passes) {
      element.textContent = passes ? 'Pass' : 'Fail';
      element.className = 'wcag-badge ' + (passes ? 'badge-pass' : 'badge-fail');
    }

    // Update the entire contrast checker UI
    function updateContrastChecker() {
      const fgInput = document.getElementById('fgColorInput').value;
      const bgInput = document.getElementById('bgColorInput').value;

      const fgColor = parseColor(fgInput);
      const bgColor = parseColor(bgInput);

      if (!fgColor || !bgColor) return;

      // Update swatches
      document.getElementById('fgSwatch').style.background = toRgba(fgColor);
      document.getElementById('bgSwatch').style.background = toRgba(bgColor);

      // Calculate contrast ratio
      const ratio = getContrastRatio(fgColor, bgColor);
      const wcag = checkWCAG(ratio);

      // Update ratio display
      document.getElementById('contrastRatio').textContent = ratio.toFixed(2) + ':1';

      // Update WCAG badges
      updateBadge(document.getElementById('normalAA'), wcag.normalAA);
      updateBadge(document.getElementById('normalAAA'), wcag.normalAAA);
      updateBadge(document.getElementById('largeAA'), wcag.largeAA);
      updateBadge(document.getElementById('largeAAA'), wcag.largeAAA);

      // Update preview
      const preview = document.getElementById('contrastPreview');
      preview.style.backgroundColor = toRgba(bgColor);
      preview.style.color = toRgba(fgColor);

      // Update example text rows
      const exampleRows = ['example24', 'example18', 'example16', 'example14', 'example12'];
      exampleRows.forEach(id => {
        const row = document.getElementById(id);
        row.style.backgroundColor = toRgba(bgColor);
        row.style.color = toRgba(fgColor);
      });

      // Update example badges based on text size
      // Large text: 24px bold, 18px bold - use largeAA threshold
      updateBadge(document.getElementById('badge24'), wcag.largeAA);
      updateBadge(document.getElementById('badge18'), wcag.largeAA);
      // Normal text: 16px, 14px, 12px - use normalAA threshold
      updateBadge(document.getElementById('badge16'), wcag.normalAA);
      updateBadge(document.getElementById('badge14'), wcag.normalAA);
      updateBadge(document.getElementById('badge12'), wcag.normalAA);
    }

    // Swap foreground and background colors
    function swapContrastColors() {
      const fgInput = document.getElementById('fgColorInput');
      const bgInput = document.getElementById('bgColorInput');
      const fgPicker = document.getElementById('fgColorPicker');
      const bgPicker = document.getElementById('bgColorPicker');

      const tempText = fgInput.value;
      const tempPicker = fgPicker.value;

      fgInput.value = bgInput.value;
      fgPicker.value = bgPicker.value;
      bgInput.value = tempText;
      bgPicker.value = tempPicker;

      updateContrastChecker();
    }

    // Sync contrast checker color pickers with text inputs
    document.getElementById('fgColorPicker').addEventListener('input', (e) => {
      document.getElementById('fgColorInput').value = e.target.value;
      updateContrastChecker();
    });

    document.getElementById('bgColorPicker').addEventListener('input', (e) => {
      document.getElementById('bgColorInput').value = e.target.value;
      updateContrastChecker();
    });

    document.getElementById('fgColorInput').addEventListener('input', (e) => {
      const color = parseColor(e.target.value);
      if (color) {
        document.getElementById('fgColorPicker').value = toHex(color);
        updateContrastChecker();
      }
    });

    document.getElementById('bgColorInput').addEventListener('input', (e) => {
      const color = parseColor(e.target.value);
      if (color) {
        document.getElementById('bgColorPicker').value = toHex(color);
        updateContrastChecker();
      }
    });

    // Initialize contrast checker
    updateContrastChecker();

    // Register Service Worker for offline support
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(() => console.log('Service Worker registered'))
        .catch((err) => console.log('SW registration failed:', err));
    }
  </script>
</body>
</html>
